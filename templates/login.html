<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>تسجيل الدخول</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: { extend: { fontFamily: { sans: ["Cairo","ui-sans-serif","system-ui"] } } }
      };
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  </head>
  <body class="min-h-screen bg-gray-50 text-gray-800 flex items-center justify-center p-4">
    <div class="w-full max-w-md">
      <div class="bg-white shadow-sm rounded-xl border p-6 md:p-8">
        <div class="mb-6 text-center">
          <div class="inline-flex w-12 h-12 items-center justify-center rounded-full bg-sky-100 text-sky-600 mb-3">
            <i class="fa-solid fa-layer-group"></i>
          </div>
          <h1 class="font-semibold text-xl">تسجيل الدخول</h1>
          <p class="text-sm text-gray-500">الرجاء إدخال بيانات الدخول لحسابك</p>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="space-y-2 mb-4">
              {% for category, message in messages %}
                <div class="px-4 py-3 rounded border text-sm {{ 'bg-green-50 border-green-200 text-green-800' if category=='success' else ('bg-red-50 border-red-200 text-red-800' if category=='error' else 'bg-blue-50 border-blue-200 text-blue-800') }}">
                  {{ message }}
                </div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('login') }}" class="space-y-4">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() if csrf_token else '' }}" />
          <div class="space-y-1">
            <label class="text-sm font-medium">البريد الإلكتروني</label>
            <input type="email" name="email" value="{{ request.form.get('email','') }}" required class="w-full px-3 py-2 rounded-md border border-gray-200 focus:border-sky-500 focus:ring-2 focus:ring-sky-200 bg-white" placeholder="name@example.com" />
          </div>
          <div class="space-y-1">
            <label class="text-sm font-medium">كلمة المرور</label>
            <input type="password" name="password" required class="w-full px-3 py-2 rounded-md border border-gray-200 focus:border-sky-500 focus:ring-2 focus:ring-sky-200 bg-white" placeholder="••••••••" />
          </div>
          <div class="flex items-center justify-between text-sm">
            <label class="inline-flex items-center gap-2">
              <input type="checkbox" name="remember" class="rounded border-gray-300 text-sky-600 focus:ring-sky-200">
              <span>تذكرني</span>
            </label>
            <a href="#" class="text-sky-600 hover:text-sky-700">نسيت كلمة المرور؟</a>
          </div>
          <button class="w-full py-2.5 rounded-md bg-sky-600 text-white hover:bg-sky-700">دخول</button>
        </form>
      </div>

      <p class="text-center text-sm text-gray-500 mt-4">
        © {{ current_year or 2025 }} نظام الإدارة
      </p>
    </div>
  </body>
  
</html>

